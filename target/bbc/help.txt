Building for the BBC Micro Model B
==================================

You will need:

 * cc65 compiler    : https://cc65.github.io
 * bbcim            :
   http://wouter.bbcmicro.net/bbc/pc-software-whs.html
 * MAME emulator    : https://www.mamedev.org
 * BBC ROM files at : roms/bbcb/os12.rom 
                      roms/bbcb/basic2.rom 
                      roms/bbcb/phroma.bin 
                      roms/bbcb/saa5050 
                      roms/bbcb/dnfs120.rom

To build, call:

 make TARGET=bbc [BBCLOADINGMETHOD=...]
                 [BBCMACHINE=...]
                 [OPTION=...]

Where: (> indicating default)

 > OPTION=default          (C code, slower)
   OPTION=assembly         (assembly code, faster)
   OPTION=tape             (assembly code, no disk buffers, so
                           starts at &0E00)

   BBCLOADINGMETHOD=disk   (uses disk image)
   BBCLOADINGMETHOD=serial (uses serial loader)
 > BBCLOADINGMETHOD=tape   (uses tape audio)

   BBCMACHINE=mame         (via MAME)
 > BBCMACHINE=real         (on a physical BBC Micro Model B)

and follow the instructions. You may need suitable
amplification between the host machine's audio output and the
BBC Micro for it to load successfully.

Target files are:

 bbc/orterforth     (pure binary)
 bbc/orterforth.ser (binary prepended with BASIC serial loader)
 bbc/orterforth.ssd (disc emulator file)
 bbc/orterforth.uef (tape emulator file)
 bbc/orterforth.wav (tape audio)

To run in MAME, call:

 make run TARGET=bbc BBCMACHINE=mame [OPTION=...]

Likewise, to run on a physical machine, call:

 make run TARGET=bbc [BBCLOADINGMETHOD=...] [OPTION=...]

NB It is necessary to supply the OPTION variable, because make
will attempt to build any intermediate targets which may be
different depending on OPTION. Builds may fail because libs
built with different values of OPTION are incompatible.

The fastest combination of options for build and run are:

 make run TARGET=bbc BBCLOADINGMETHOD=disk BBCMACHINE=mame \
  OPTION=assembly

To specify disc images, use:

 make run TARGET=bbc [...] [DR0=...] [DR1=...]
